---
import Layout from "../../layouts/Layout.astro";
import Header from "../../components/header.astro";
import Footer from "../../components/footer.astro";
import { addOffre } from "../../backend.mjs";

let message = "";
if (Astro.request.method === "POST") {
    const formData = await Astro.request.formData();
    const response = await addOffre(formData);
    message = response.message;
}
---

<Layout>
    <h1 class="text-lg" style="margin:10px">Ajouter une offre</h1>
    {message && <p class="text-green-600">{message}</p>}
    <form action="/offres/add" method="POST" enctype="multipart/form-data">
        <div
            class="w-full mt-2 p-2 border border-gray-300 rounded-md"
            style="margin: 5px;"
        >
            <input
                type="text"
                name="nom_maison"
                placeholder="Nom de la maison"
                required
            />
        </div>
        <div
            class="w-full mt-2 p-2 border border-gray-300 rounded-md"
            style="margin: 5px;"
        >
            <input type="number" name="prix" placeholder="Prix" />
        </div>
        <div
            class="w-full mt-2 p-2 border border-gray-300 rounded-md"
            style="margin: 5px;"
        >
            <input
                type="number"
                name="nb_de_sdb"
                placeholder="Nombre de salles de bain"
            />
        </div>
        <div
            class="w-full mt-2 p-2 border border-gray-300 rounded-md"
            style="margin: 5px;"
        >
            <input
                type="number"
                name="nb_de_chambres"
                placeholder="Nombre de chambres"
            />
        </div>
        <div
            class="w-full mt-2 p-2 border border-gray-300 rounded-md"
            style="margin: 5px;"
        >
            <input type="number" name="surface" placeholder="Superficie" />
        </div>
        <div
            class="w-full mt-2 p-2 border border-gray-300 rounded-md"
            style="margin: 5px;"
        >
            <input type="file" name="images" />
        </div>
        <button
            class="bg-yellow-600 text-white p-2"
            style="border-radius: 5px; margin:10px"
            type="submit">Ajouter</button
        >
    </form>
</Layout>
